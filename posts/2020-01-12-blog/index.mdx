---
title: Setting up this blog
date: 2020-01-12
published: true
tags: [meta, tech]
---

I have been looking for a platform to blog. It should support...

* templates,
* comments,
* tags,
* archive,
* feeds (RSS or Atom) and
* search. 

On the technical side, I [want](/2020-01-01-about%20me/) it to...

* be open source, 
* allow me to edit the posts locally in any editor I please (which requires flat-file input),
* support Markdown and (preferably) Org-mode input,
* maintain version history of the content,
* deploy to Github Pages (which requires output a site without backend)),
* be as free of tracking, ads or vendor lock-in as possible.

I have looked into [Nikola](https://getnikola.com/), [org-publish](https://orgmode.org/manual/Publishing.html), [Jekyll](https://jekyllrb.com/) and the likes, but never really liked one.

So now I have decided to see if I can start one from scratch, based on [Gatsby](http://gatsbyjs.org/):

1. I started off with this [excellent tutorial](https://www.freecodecamp.org/news/build-a-developer-blog-from-scratch-with-gatsby-and-mdx/).
2. I added a [Github pages publish workflow](https://github.com/marketplace/actions/deploy-to-github-pages) (inspired by [gatsby-starter-olga](https://github.com/orgapp/gatsby-starter-orga/blob/master/.github/workflows/ci.yml)). I also needed to [create a personal access token](https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line) and [store it as a secret](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets).
3. I added comments, using [utteranc.es](https://utteranc.es/) through [react-utterances](https://github.com/b6pzeusbc54tvhw5jgpyw8pwz2x6gs/react-utterances).
4. I added tags, archive and pinned pages myself.
5. I added RSS feeds using [gatsby-plugin-feed](https://www.gatsbyjs.org/packages/gatsby-plugin-feed/).

Based on the Gatsby page about [adding search](https://www.gatsbyjs.org/docs/adding-search/) it seems you need some backend for search. As I don't want a backend, the blog will not have a search feature for now.

I have also decided against adding org-mode support with [gatsby-transformer-orga](https://www.gatsbyjs.org/packages/gatsby-transformer-orga/), because I couldn't figure out an elegant way to support multiple input formats and I am fine with Markdown for now.

My workflow is now really simple:

1. To add a post, I create a folder in `/posts` with an `index.mdx` file in it.
2. I edit `index.mdx` in Markdown.
3. I commit and push.
4. After a couple of minutes, Github has generated my new website.

Feel free to check [Github](https://github.com/randomrambler/dwim) for all the gory details.