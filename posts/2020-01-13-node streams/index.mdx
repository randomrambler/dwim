---
title: Node Streams
date: 2020-01-13
tags: [node, research]
published: false
---

I am looking into a way to do ETL (Extract, Transform, Load) in Node. It seams to me that Streams are a very natural way to do this. However, Streams only seem to support simple pipelines of the form:

```js
const fs = require('fs');
const zlib = require('zlib');

fs.createReadStream('./file.txt')                // read a file
  .pipe(zlib.createGzip())                       // zip it
  .pipe(fs.createWriteStream('./file.txt.gz'));  // and write it
```

In a diagram this would look like:

![flow diagram of a pipe](pipe.png)

But imagine I want to zip a file and mark it if it fails an expected checksum. In a diagram, that would look like:

![flow diagram of a network](network.png)

In order to do that, I would need Stream operations like `split` and `join`, but these don't seem to exist.

Let's figure out how to do this!